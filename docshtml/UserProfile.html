<!DOCTYPE html><html><head><title>UserProfile</title><link rel="stylesheet" href="KIDLspec.css"></head><body><div class="module"><div class="comment"></div><span class="keyword">module</span><span class="space"></span><span class="name">UserProfile</span><span class="space"></span><span>{</span><br><br><div><span class="typedef"><div class="comment"><div><span class="tab"></span><span>/*</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span><span class="annotation">@range</span><span class="space"></span><span>[0,1]</span></span></div><div><span class="tab"></span><span class="space"></span><span>*/</span></div></div><span class="tab"></span><span class="keyword">typedef</span><span class="space"></span><span class="primitive">int</span><span class="space"></span><span class="name" id="typedefUserProfile.bool">bool</span><span>;</span></span></div><br><div><span class="typedef"><div class="comment"></div><span class="tab"></span><span class="keyword">typedef</span><span class="space"></span><span class="primitive">string</span><span class="space"></span><span class="name" id="typedefUserProfile.username">username</span><span>;</span></span></div><br><div><span class="typedef"><div class="comment"></div><span class="tab"></span><span class="keyword">typedef</span><span class="space"></span><span class="primitive">string</span><span class="space"></span><span class="name" id="typedefUserProfile.realname">realname</span><span>;</span></span></div><br><div><span class="typedef"><div class="comment"></div><span class="tab"></span><span class="keyword">typedef</span><span class="space"></span><span><span class="primitive">structure</span><span class="space"></span><span>{</span><div><span><span class="tab"></span><span class="tab"></span><span class="name"><a href="#typedefUserProfile.username">username</a></span><span class="space"></span><span class="name">username</span><span>;</span></span></div><div><span><span class="tab"></span><span class="tab"></span><span class="name"><a href="#typedefUserProfile.realname">realname</a></span><span class="space"></span><span class="name">realname</span><span>;</span></span></div><div><span><span class="tab"></span><span class="tab"></span><span class="primitive">string</span><span class="space"></span><span class="name">thumbnail</span><span>;</span></span></div><span class="tab"></span><span>}</span></span><span class="space"></span><span class="name" id="typedefUserProfile.User">User</span><span>;</span></span></div><br><div><span class="typedef"><div class="comment"></div><span class="tab"></span><span class="keyword">typedef</span><span class="space"></span><span><span class="primitive">structure</span><span class="space"></span><span>{</span><div><span><span class="tab"></span><span class="tab"></span><span class="name"><a href="#typedefUserProfile.User">User</a></span><span class="space"></span><span class="name">user</span><span>;</span></span></div><div><span><span class="tab"></span><span class="tab"></span><span class="primitive">UnspecifiedObject</span><span class="space"></span><span class="name">profile</span><span>;</span></span></div><span class="tab"></span><span>}</span></span><span class="space"></span><span class="name" id="typedefUserProfile.UserProfile">UserProfile</span><span>;</span></span></div><br><div><span class="funcdef"><div class="comment"></div><span class="tab"></span><span class="keyword">funcdef</span><span class="space"></span><span class="name" id="funcdefUserProfile.ver">ver</span><span>(</span><span class="parameters"></span><span>)</span><span class="space"></span><span class="keyword">returns</span><span>(</span><span class="returns"><span class="parameter"><span class="primitive">string</span></span></span><span>)</span><span class="space"></span><span class="keyword">authentication</span><span class="space"></span><span class="keyword">none</span><span>;</span></span></div><br><div><span class="typedef"><div class="comment"></div><span class="tab"></span><span class="keyword">typedef</span><span class="space"></span><span><span class="primitive">structure</span><span class="space"></span><span>{</span><div><span><span class="tab"></span><span class="tab"></span><span class="primitive">string</span><span class="space"></span><span class="name">filter</span><span>;</span></span></div><span class="tab"></span><span>}</span></span><span class="space"></span><span class="name" id="typedefUserProfile.FilterParams">FilterParams</span><span>;</span></span></div><br><div><span class="funcdef"><div class="comment"><div><span class="tab"></span><span>/*</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>Returns a list of users matching the filter.  If the 'filter' field</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>is empty or null, then this will return all Users.  The filter will</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>match substrings in usernames and realnames.</span></div><div><span class="tab"></span><span class="space"></span><span>*/</span></div></div><span class="tab"></span><span class="keyword">funcdef</span><span class="space"></span><span class="name" id="funcdefUserProfile.filter_users">filter_users</span><span>(</span><span class="parameters"><span class="parameter"><span class="name"><a href="#typedefUserProfile.FilterParams">FilterParams</a></span><span class="space"></span><span class="name">p</span></span></span><span>)</span><span class="space"></span><span class="keyword">returns</span><span>(</span><span class="returns"><span class="parameter"><span><span class="primitive">list</span><span>&lt;</span><span class="name"><a href="#typedefUserProfile.User">User</a></span><span>&gt;</span></span><span class="space"></span><span class="name">users</span></span></span><span>)</span><span class="space"></span><span class="keyword">authentication</span><span class="space"></span><span class="keyword">none</span><span>;</span></span></div><br><div><span class="funcdef"><div class="comment"><div><span class="tab"></span><span>/*</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>Given a list of usernames, returns a list of UserProfiles in the same order.</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>If no UserProfile was found for a username, the UserProfile at that position will</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>be null.</span></div><div><span class="tab"></span><span class="space"></span><span>*/</span></div></div><span class="tab"></span><span class="keyword">funcdef</span><span class="space"></span><span class="name" id="funcdefUserProfile.get_user_profile">get_user_profile</span><span>(</span><span class="parameters"><span class="parameter"><span><span class="primitive">list</span><span>&lt;</span><span class="name"><a href="#typedefUserProfile.username">username</a></span><span>&gt;</span></span><span class="space"></span><span class="name">usernames</span></span></span><span>)</span><span class="space"></span><span class="keyword">returns</span><span>(</span><span class="returns"><span class="parameter"><span><span class="primitive">list</span><span>&lt;</span><span class="name"><a href="#typedefUserProfile.UserProfile">UserProfile</a></span><span>&gt;</span></span><span class="space"></span><span class="name">profiles</span></span></span><span>)</span><span class="space"></span><span class="keyword">authentication</span><span class="space"></span><span class="keyword">none</span><span>;</span></span></div><br><div><span class="typedef"><div class="comment"></div><span class="tab"></span><span class="keyword">typedef</span><span class="space"></span><span><span class="primitive">structure</span><span class="space"></span><span>{</span><div><span><span class="tab"></span><span class="tab"></span><span class="name"><a href="#typedefUserProfile.UserProfile">UserProfile</a></span><span class="space"></span><span class="name">profile</span><span>;</span></span></div><span class="tab"></span><span>}</span></span><span class="space"></span><span class="name" id="typedefUserProfile.SetUserProfileParams">SetUserProfileParams</span><span>;</span></span></div><br><div><span class="funcdef"><div class="comment"><div><span class="tab"></span><span>/*</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>Set the UserProfile for the user indicated in the User field of the UserProfile</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>object.  This operation can only be performed if authenticated as the user in</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>the UserProfile or as the admin account of this service.</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span></span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>If the profile does not exist, one will be created.  If it does already exist,</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>then the entire user profile will be replaced with the new profile.</span></div><div><span class="tab"></span><span class="space"></span><span>*/</span></div></div><span class="tab"></span><span class="keyword">funcdef</span><span class="space"></span><span class="name" id="funcdefUserProfile.set_user_profile">set_user_profile</span><span>(</span><span class="parameters"><span class="parameter"><span class="name"><a href="#typedefUserProfile.SetUserProfileParams">SetUserProfileParams</a></span><span class="space"></span><span class="name">p</span></span></span><span>)</span><span class="space"></span><span class="keyword">returns</span><span>(</span><span class="returns"></span><span>)</span><span class="space"></span><span class="keyword">authentication</span><span class="space"></span><span class="keyword">required</span><span>;</span></span></div><br><div><span class="funcdef"><div class="comment"><div><span class="tab"></span><span>/*</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>Update the UserProfile for the user indicated in the User field of the UserProfile</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>object.  This operation can only be performed if authenticated as the user in</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>the UserProfile or as the admin account of this service.</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span></span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>If the profile does not exist, one will be created.  If it does already exist,</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>then the specified top-level fields in profile will be updated.</span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span></span></div><div><span class="tab"></span><span class="space"></span><span>*</span><span class="space"></span><span>todo: add some way to remove fields.  Fields in profile can only be modified or added.</span></div><div><span class="tab"></span><span class="space"></span><span>*/</span></div></div><span class="tab"></span><span class="keyword">funcdef</span><span class="space"></span><span class="name" id="funcdefUserProfile.update_user_profile">update_user_profile</span><span>(</span><span class="parameters"><span class="parameter"><span class="name"><a href="#typedefUserProfile.SetUserProfileParams">SetUserProfileParams</a></span><span class="space"></span><span class="name">p</span></span></span><span>)</span><span class="space"></span><span class="keyword">returns</span><span>(</span><span class="returns"></span><span>)</span><span class="space"></span><span class="keyword">authentication</span><span class="space"></span><span class="keyword">required</span><span>;</span></span></div><span>}</span><span>;</span></div><div class="index"><h2>Function Index</h2><div><span class="tab"></span><span class="name"><a href="#funcdefUserProfile.filter_users">filter_users</a></span></div><div><span class="tab"></span><span class="name"><a href="#funcdefUserProfile.get_user_profile">get_user_profile</a></span></div><div><span class="tab"></span><span class="name"><a href="#funcdefUserProfile.set_user_profile">set_user_profile</a></span></div><div><span class="tab"></span><span class="name"><a href="#funcdefUserProfile.update_user_profile">update_user_profile</a></span></div><div><span class="tab"></span><span class="name"><a href="#funcdefUserProfile.ver">ver</a></span></div><h2>Type Index</h2><div><span class="tab"></span><span class="name"><a href="#typedefUserProfile.bool">bool</a></span></div><div><span class="tab"></span><span class="name"><a href="#typedefUserProfile.FilterParams">FilterParams</a></span></div><div><span class="tab"></span><span class="name"><a href="#typedefUserProfile.realname">realname</a></span></div><div><span class="tab"></span><span class="name"><a href="#typedefUserProfile.SetUserProfileParams">SetUserProfileParams</a></span></div><div><span class="tab"></span><span class="name"><a href="#typedefUserProfile.User">User</a></span></div><div><span class="tab"></span><span class="name"><a href="#typedefUserProfile.username">username</a></span></div><div><span class="tab"></span><span class="name"><a href="#typedefUserProfile.UserProfile">UserProfile</a></span></div></div></body></html>